# Read the Excel file
data <- read_excel("College Dataset.xlsx")
# Rename columns for clarity (based on the header)
colnames(data) <- c("Pos", "Player", "College_Stats", "AP1", "PB", "St", "wAV", "Ht", "Wt", "Yrs_Num", "Years_Range", "School")
# Extract the start year from Years_Range
data <- data %>%
mutate(start_year = as.integer(sub("-.*", "", Years_Range)))
# Filter to keep players who started in 2011 or later
filtered_data <- data %>%
filter(start_year >= 2011)
# Select only the specified columns
fixed_data <- filtered_data %>%
select(Pos, Player, Yrs_Num, Years_Range, School)
# Rename columns as per user labels if desired
colnames(fixed_data) <- c("Position", "Player", "Years Played", "Years Played (From-To)", "School")
# View the selected data (or you can use write_excel_csv to save it)
head(fixed_data)
library(readxl)
library(dplyr)
# Read the Excel file
data <- read_excel("College Dataset.xlsx")
# Rename columns for clarity (based on the header)
colnames(data) <- c("Pos", "Player", "College_Stats", "AP1", "PB", "St", "wAV", "Ht", "Wt", "Yrs_Num", "Years_Range", "School")
# Extract the start year from Years_Range
data <- data %>%
mutate(start_year = as.integer(sub("-.*", "", Years_Range)))
# Filter to keep players who started in 2011 or later
filtered_data <- data %>%
filter(start_year >= 2011)
# Select only the specified columns
fixed_data <- filtered_data %>%
select(Pos, Player, Yrs_Num, Years_Range, School)
# Rename columns as per user labels if desired
colnames(fixed_data) <- c("Position", "Player", "Years Played", "Years Played (From-To)", "School")
# View the selected data (or you can use write_excel_csv to save it)
head(fixed_data)
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R")
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R", echo = TRUE)
source("01_funct_DataCleaning.R")
source("01_funct_DataCleaning.R")
source("03_numeric_Table.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R", echo = TRUE)
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
source("01_funct_DataCleaning.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R", echo = TRUE)
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R", echo = TRUE)
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R", echo = TRUE)
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R", echo = TRUE)
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R")
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R")
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
source("00_requirements.R")
source("01_funct_DataCleaning.R")
source("02_funct_Plots.R")
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
# This chunk loads the script to attach necessary packages like tidyverse and gridExtra.
# It sets up the environment for data manipulation and visualization.
# Outcome: Packages are installed and enabled
source("00_requirements.R")
# This chunk sources the data cleaning script to process the raw dataset.
# It takes raw data, keeps/renames columns, filters to 2011+, and saves the cleaned data.
# Outcome: A cleaned dataset is made and saved as "cleaned_data.RDS" for later use.
source("01_funct_DataCleaning.R")
# This chunk sources the plotting script to create bar plots.
# It makes bar charts for each SEC school, showing player counts across three year gaps.
# Outcome: Bar plots are made and displayed, visualizing trends in player representation.
source("02_funct_Plots.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
growth_table <- df %>%
group_by(School, period) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
# This chunk loads the script to attach necessary packages like tidyverse and gridExtra.
# It sets up the environment for data manipulation and visualization.
# Outcome: Packages are installed and enabled
source("00_requirements.R")
growth_table <- df %>%
group_by(School, period) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
knitr::opts_chunk$set(echo = TRUE)
# This chunk loads the script to attach necessary packages like tidyverse and gridExtra.
# It sets up the environment for data manipulation and visualization.
# Outcome: Packages are installed and enabled
source("00_requirements.R")
# This chunk sources the data cleaning script to process the raw dataset.
# It takes raw data, keeps/renames columns, filters to 2011+, and saves the cleaned data.
# Outcome: A cleaned dataset is made and saved as "cleaned_data.RDS" for later use.
source("01_funct_DataCleaning.R")
# This chunk sources the plotting script to create bar plots.
# It makes bar charts for each SEC school, showing player counts across three year gaps.
# Outcome: Bar plots are made and displayed, visualizing trends in player representation.
source("02_funct_Plots.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
growth_table <- df %>%
group_by(School, period) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
col(df)
colnames(df)
colnames(df)
colnames(df)
colnames(data)
growth_table <- df %>%
group_by(School, start_year) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- df %>%
group_by(School, start) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- df %>%
group_by(School, Start) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
colnames(data_set)
growth_table <- df %>%
group_by(School, YearRange) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- data_set %>%
group_by(School, YearRange) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- data_set %>%
group_by(School, YearRange) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=YearRange, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table
growth_table <- data_set %>%
group_by(School, Start) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=YearRange, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- data_set %>%
group_by(School, Start) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=Start, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table
View(data)
View(filtered_data)
growth_table <- filtered_data %>%
group_by(School, Start) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=filtered_data, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- filtered_data %>%
group_by(School, Years_Range) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=filtered_data, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table <- filtered_data %>%
group_by(School, Years_Range) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=Years_Range, values_from=count) %>%
mutate(percent_growth = (2021-2025 - 2011-2015) / 2011-2015 * 100)
growth_table
df <- readRDS("cleaned_data.RDS") %>%
mutate(period = case_when(
year_start %in% 2011:2015 ~ "2011-2015",
year_start %in% 2016:2020 ~ "2016-2020",
year_start %in% 2021:2025 ~ "2021-2025"
))
cleaned_data <- readRDS("~/Downloads/Stat107Project-The3rdTry/cleaned_data.RDS")
cleaned_data <- readRDS("~/Downloads/Stat107Project-The3rdTry/cleaned_data.RDS")
View(cleaned_data)
df <- readRDS("cleaned_data.RDS") %>%
mutate(period = case_when(
Years_From_To %in% 2011:2015 ~ "2011-2015",
Years_From_To %in% 2016:2020 ~ "2016-2020",
Years_From_To %in% 2021:2025 ~ "2021-2025"
))
summary_plot <- df %>%
group_by(School, period) %>%
summarise(count = n(), .groups="drop") %>%
ggplot(aes(period, count, fill = period)) +
geom_col() +
facet_wrap(~School, scales="free_y") +
labs(title = "NFL Players Produced by SEC Schools (2011-2025)",
x = "Time Period",
y = "Players entering NFL") +
theme_bw()
summary_plot
df <- readRDS("cleaned_data.RDS") %>%
growth_table <- df %>%
group_by(School, period) %>%
summarise(count=n(),.groups="drop") %>%
pivot_wider(names_from=period, values_from=count) %>%
mutate(percent_growth = (`2021-2025` - `2011-2015`) / `2011-2015` * 100)
print(colnames(df))
df <- readRDS("cleaned_data.RDS") %>%
df <- df %>%
mutate(period = case_when(
From %in% 2011:2015 ~ "2011-2015",
From %in% 2016:2020 ~ "2016-2020",
From %in% 2021:2025 ~ "2021-2025"
))
df <- readRDS("cleaned_data.RDS")
# Build growth table (now works because period already exists)
growth_table <- df %>%
group_by(School, period) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = period, values_from = count)
df <- readRDS("cleaned_data.RDS")
# Build growth table (now works because period already exists)
growth_table <- df %>%
group_by(School, Years_From_To) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = Years_From_To, values_from = count)
growth_table       # view table structure
# Auto-detect column names for growth calculation
year_cols <- names(growth_table)[2:4]   # column2=2011–2015, column3=2016–2020, column4=2021–2025
growth_table <- growth_table %>%
mutate(percent_growth = (.[[year_cols[3]]] - .[[year_cols[1]]]) / .[[year_cols[1]]] * 100)
growth_table
df <- readRDS("cleaned_data.RDS")
df <- df %>%
mutate(period = case_when(
Years_Num >= 2011 & Years_Num <= 2015 ~ "2011-2015",
Years_Num >= 2016 & Years_Num <= 2020 ~ "2016-2020",
Years_Num >= 2021 & Years_Num <= 2025 ~ "2021-2025",
TRUE ~ NA_character_
))
df <- readRDS("cleaned_data.RDS")
df <- df %>%
mutate(period = case_when(
Years_Num >= 2011 & Years_Num <= 2015 ~ "2011-2015",
Years_Num >= 2016 & Years_Num <= 2020 ~ "2016-2020",
Years_Num >= 2021 & Years_Num <= 2025 ~ "2021-2025",
TRUE ~ NA_character_
))
summary_data <- df %>%
group_by(School, period) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = period, values_from = count)
# auto-detect columns safely
year_cols <- names(summary_data)[2:4]
growth_table <- summary_data %>%
mutate(percent_growth = (.[[year_cols[3]]] - .[[year_cols[1]]]) / .[[year_cols[1]]] * 100)
df <- readRDS("cleaned_data.RDS")
df <- df %>%
mutate(period = case_when(
Years_Num >= 2011 & Years_Num <= 2015 ~ "2011-2015",
Years_Num >= 2016 & Years_Num <= 2020 ~ "2016-2020",
Years_Num >= 2021 & Years_Num <= 2025 ~ "2021-2025",
TRUE ~ NA_character_
))
summary_data <- df %>%
group_by(School, period) %>%
summarise(count = n(), .groups = "drop") %>%
pivot_wider(names_from = period, values_from = count)
# auto-detect columns safely
cols <- intersect(names(summary_data), c("2011-2015","2016-2020","2021-2025"))
# Only compute growth if at least two periods exist
if(length(cols) >= 2) {
summary_data <- summary_data %>%
mutate(percent_growth =
(.[[cols[length(cols)]]] - .[[cols[1]]]) /
.[[cols[1]]] * 100)
}
summary_data
# Display the updated summary table
print(college_summary_wide)
# Load cleaned data set
data_set <- readRDS("cleaned_data.RDS")
# Split "Years_From_To" into Start and End
data_set <- data_set %>%
separate(Years_From_To, into = c("Start", "End"), sep = "-", convert = TRUE, fill = "right") %>%
mutate(
Start = as.integer(Start),
End   = if_else(is.na(End), Start, as.integer(End))
)
# Define year ranges
data_set <- data_set %>%
mutate(YearRange = case_when(
Start >= 2011 & Start <= 2015 ~ "2011-2015",
Start >= 2016 & Start <= 2020 ~ "2016-2020",
Start >= 2021 & Start <= 2025 ~ "2021-2025",
TRUE ~ NA_character_
))
# Count players per school and year range
college_summary <- data_set %>%
filter(!is.na(YearRange)) %>%
group_by(School, YearRange) %>%
summarise(Players = n(), .groups = "drop")
# Pivot to wide format for a readable numeric table
college_summary_wide <- college_summary %>%
pivot_wider(names_from = YearRange,
values_from = Players,
values_fill = 0) %>%
arrange(School)
# After creating college_summary_wide, add percentage change columns
college_summary_wide <- college_summary_wide %>%
mutate(
`Pct Change 2011-2015 to 2016-2020` = ifelse(`2011-2015` == 0, NA,
round(((`2016-2020` - `2011-2015`) / `2011-2015`) * 100, 2)),
`Pct Change 2016-2020 to 2021-2025` = ifelse(`2016-2020` == 0, NA,
round(((`2021-2025` - `2016-2020`) / `2016-2020`) * 100, 2))
)
# Display the updated summary table
print(college_summary_wide)
# Display the summary table
print(college_summary_wide)
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
install.packages("kableExtra")
library(kableExtra)
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# Load cleaned data set
data_set <- readRDS("cleaned_data.RDS")
# Split "Years_From_To" into Start and End
data_set <- data_set %>%
separate(Years_From_To, into = c("Start", "End"), sep = "-", convert = TRUE, fill = "right") %>%
mutate(
Start = as.integer(Start),
End = if_else(is.na(End), Start, as.integer(End))
)
# Define year ranges
data_set <- data_set %>%
mutate(YearRange = case_when(
Start >= 2011 & Start <= 2015 ~ "2011-2015",
Start >= 2016 & Start <= 2020 ~ "2016-2020",
Start >= 2021 & Start <= 2025 ~ "2021-2025",
TRUE ~ NA_character_
))
# Count players per school and year range
college_summary <- data_set %>%
filter(!is.na(YearRange)) %>%
group_by(School, YearRange) %>%
summarise(Players = n(), .groups = "drop")
# Pivot to wide format for a readable numeric table
college_summary_wide <- college_summary %>%
pivot_wider(names_from = YearRange,
values_from = Players,
values_fill = 0) %>%
arrange(School)
# After creating college_summary_wide, add percentage change columns
college_summary_wide <- college_summary_wide %>%
mutate(
`2011-2015 to 2016-2020` = ifelse(`2011-2015` == 0, NA,
round(((`2016-2020` - `2011-2015`) / `2011-2015`) * 100, 2)),
`2016-2020 to 2021-2025` = ifelse(`2016-2020` == 0, NA,
round(((`2021-2025` - `2016-2020`) / `2016-2020`) * 100, 2))
)
# Format and print the table for PDF knitting (replaces the original print() call)
college_summary_wide %>%
kable(format = "latex", booktabs = TRUE, caption = "College Summary by Year Range") %>%
kable_styling(latex_options = c("scale_down", "striped", "hold_position")) %>%
print()
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
knitr::opts_chunk$set(echo = TRUE)
# This chunk loads the script to attach necessary packages like tidyverse and gridExtra.
# It sets up the environment for data manipulation and visualization.
# Outcome: Packages are installed and enabled
source("00_requirements.R")
# This chunk sources the data cleaning script to process the raw dataset.
# It takes raw data, keeps/renames columns, filters to 2011+, and saves the cleaned data.
# Outcome: A cleaned dataset is made and saved as "cleaned_data.RDS" for later use.
source("01_funct_DataCleaning.R")
# This chunk sources the plotting script to create bar plots.
# It makes bar charts for each SEC school, showing player counts across three year gaps.
# Outcome: Bar plots are made and displayed, visualizing trends in player representation.
source("02_funct_Plots.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
print(college_summary_wide)
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
packages <- c(
"tidyverse",   # data wrangling, plotting
"readxl",      # read Excel files
"gridExtra",   # arrange multiple ggplots
"knitr",       # knitting tables
"dplyr",       # tidy data manipulation
"tidyr"        # data tidying
"tinytex"
packages <- c(
"tidyverse",   # data wrangling, plotting
"readxl",      # read Excel files
"gridExtra",   # arrange multiple ggplots
"knitr",       # knitting tables
"dplyr",       # tidy data manipulation
"tidyr",        # data tidying
"tinytex"
)
# Load cleaned data set
data_set <- readRDS("cleaned_data.RDS")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
packages <- c(
"tidyverse",   # data wrangling, plotting
"readxl",      # read Excel files
"gridExtra",   # arrange multiple ggplots
"knitr",       # knitting tables
"dplyr",       # tidy data manipulation
"tidyr",        # data tidying
"tinytex",
"kableExtra"
)
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
packages <- c(
"tidyverse",   # data wrangling, plotting
"readxl",      # read Excel files
"gridExtra",   # arrange multiple ggplots
"knitr",       # knitting tables
"dplyr",       # tidy data manipulation
"tidyr",        # data tidying
"tinytex"
)
print(college_summary_wide)
source("04_percentage_changes.R")
source("04_percentage_changes.R")
# This chunk sources the table script to summarize data numerically.
# It creates a tibble table with player counts by school and year range.
# Outcome: A table is generated and printed, providing exact counts for comparison.
source("03_numeric_Table.R")
source("04_percentage_changes.R")
